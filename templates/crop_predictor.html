<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crop Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #f4fff6;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 520px;
            margin: 60px auto;
            padding: 32px;
            background: #fff;
            border-radius: 22px;
            box-shadow: 0 8px 40px rgba(70, 197, 126, 0.08);
        }
        .title {
            text-align: center;
            color: #38b46a;
            font-size: 2.1rem;
            font-weight: 700;
            margin-bottom: 18px;
        }
        .predictor-box {
            background: linear-gradient(135deg, #ddffe7 70%, #b8fbd3 120%);
            border-radius: 18px;
            padding: 26px 36px 22px 36px;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 18px;
        }
        .predictor-box img {
            width: 58px;
            margin-bottom: 10px;
        }
        form {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 12px;
        }
        label {
            font-weight: 600;
        }
        input, select {
            padding: 9px 14px;
            border-radius: 8px;
            border: 1px solid #b4ffda;
            font-size: 1rem;
            width: 100%;
        }
        button {
            margin-top: 8px;
            padding: 11px 0;
            border: none;
            border-radius: 9px;
            background: linear-gradient(90deg, #4ed993 90%, #6affe7 180%);
            color: #202820;
            font-size: 1.15rem;
            font-weight: 700;
            cursor: pointer;
            transition: filter .2s;
        }
        button:hover {
            filter: brightness(0.92);
        }
        .result {
            margin-top: 20px;
            padding: 18px 24px;
            background: #e5fff0;
            border-radius: 13px;
            color: #228d4b;
            font-weight: 600;
            text-align: left;
            font-size: 1.09rem;
            box-shadow: 0 2px 10px #cafeeb55;
            display: flex;
            flex-direction: column;
        }
        .result-title {
            font-size: 1.2rem;
            color: #159951;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .result-data {
            color: #262f25;
            font-size: 1rem;
        }

        /* Fix for Select2 clear button */
        .select2-container .select2-selection__clear {
            position: absolute;
            padding: 5px 5px;
            right: 5px;
            top: 40%;
            transform: translateY(-50%);
            font-size: 1rem;
            color: #38b46a;
            cursor: pointer;
            transition: color 0.2s;
        }
        .select2-container .select2-selection__clear:hover {
            color: #2e8c57;
        }

        /* Fix for Select2 dropdown */
        .select2-container--default .select2-selection--single {
            height: 40px;
            padding: 5px 10px;
            border: 1px solid #b4ffda;
            border-radius: 8px;
            background-color: #fff;
            display: flex;
            align-items: center;
        }
        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 100%;
            right: 10px;
        }
    </style>
</head>
<>
    <div class="container">
        <div class="title">Crop Predictor</div>
        <div class="predictor-box">
            <img src="https://img.icons8.com/3d-fluency/100/000000/crystal-ball.png" alt="Crop Predictor Icon">
            <form method="post" id="cropForm">
                <div>
                    <label for="state">State:</label>
                    <select id="state" name="state" class="searchable-dropdown" required style="width:100%"></select>
               </div>
                <div>
                    <label for="district">District:</label>
                    <select id="district" name="district" class="searchable-dropdown" required style="width:100%"></select>
                </div>
                <div>
                    <label for="season">Season:</label>
                    <select id="season" name="season" required>
                        <option value="">Select Season</option>
                        <option value="Kharif">Kharif</option>
                        <option value="Rabi">Rabi</option>
                        <option value="Summer">Summer</option>
                        <option value="Winter">Winter</option>
                    </select>
                </div>
                <button type="submit">Predict Crop</button>
            </form>
        </div>

        {% if result %}
        <div class="result">
            <div class="result-title">Recommended Crop</div>
            <div class="result-data">ðŸŒ± Based on your location and the selected season, <strong>{{ result }}</strong> is best suited for you! <br>
            <span style="font-size: 0.93rem;color:#32ac4a;">(Tip: Always consult local experts for best agricultural results.)</span>
            </div>
        </div>
        {% endif %}
    </div>
    ...
    <!-- Load SCRIPT LIBRARIES FIRST! -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        const states = [
            "Andaman and Nicobar Islands", "Andhra Pradesh", "Arunachal Pradesh", "Assam",
            // ... (rest of states)
            "Uttarakhand", "West Bengal"
        ];
        const districts = [
            "NICOBARS","NORTH AND MIDDLE ANDAMAN","SOUTH ANDAMANS","ANANTAPUR",
            "CHITTOOR","EAST GODAVARI","GUNTUR"
            // ... (put the full district list here)
        ];

        $(document).ready(function() {
            // Populate States
            states.forEach(st => {
                $('#state').append(new Option(st, st));
            });
            // Populate Districts
            districts.forEach(dt => {
                $('#district').append(new Option(dt, dt));
            });
            // Initialize Select2
            $('.searchable-dropdown').select2({
                placeholder: 'Select or Search...',
                allowClear: true,
                width: 'resolve'
            });
        });
    </script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</body>
</html>